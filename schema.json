{
  "version": 11,
  "tables": {
    "balatro_games": {
      "columns": {
        "id": "VARCHAR(50) PRIMARY KEY",
        "user_id": "VARCHAR(50) NOT NULL",
        "ante": "INT DEFAULT 1",
        "chips": "BIGINT DEFAULT 300",
        "hands_remaining": "INT DEFAULT 4",
        "discards_remaining": "INT DEFAULT 3",
        "current_hand": "JSON",
        "deck": "JSON",
        "jokers": "JSON",
        "blind_data": "JSON",
        "created_at": "TIMESTAMP DEFAULT CURRENT_TIMESTAMP",
        "updated_at": "TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP"
      },
      "indexes": ["user_id"]
    },
    "server_config": {
      "columns": {
        "server_id": "VARCHAR(50) PRIMARY KEY",
        "auto_reply_enabled": "BOOLEAN DEFAULT TRUE",
        "intent_detection_mode": "VARCHAR(20) DEFAULT 'LLM'",
        "created_at": "TIMESTAMP DEFAULT CURRENT_TIMESTAMP",
        "updated_at": "TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP"
      },
      "indexes": []
    },
    "server_rivals": {
      "columns": {
        "server_id": "VARCHAR(50) NOT NULL",
        "rival_id": "VARCHAR(50) NOT NULL",
        "rival_name": "VARCHAR(100) NOT NULL",
        "description": "TEXT",
        "created_at": "TIMESTAMP DEFAULT CURRENT_TIMESTAMP",
        "updated_at": "TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP",
        "PRIMARY KEY (server_id, rival_id)": ""
      },
      "indexes": ["server_id"]
    },
    "server_role_permissions": {
      "columns": {
        "server_id": "VARCHAR(50) NOT NULL",
        "role_id": "VARCHAR(50) NOT NULL",
        "permission_level": "VARCHAR(20) NOT NULL",
        "created_at": "TIMESTAMP DEFAULT CURRENT_TIMESTAMP",
        "updated_at": "TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP",
        "PRIMARY KEY (server_id, role_id)": ""
      },
      "indexes": ["server_id"]
    },
    "game_outcomes": {
      "columns": {
        "id": "INT AUTO_INCREMENT PRIMARY KEY",
        "server_id": "VARCHAR(50) NOT NULL",
        "game_type": "VARCHAR(20) NOT NULL",
        "player1_id": "VARCHAR(50) NOT NULL",
        "player1_name": "VARCHAR(100) NOT NULL",
        "player2_id": "VARCHAR(50)",
        "player2_name": "VARCHAR(100)",
        "winner_id": "VARCHAR(50)",
        "game_duration": "INT",
        "final_score": "JSON",
        "game_mode": "VARCHAR(20)",
        "created_at": "TIMESTAMP DEFAULT CURRENT_TIMESTAMP"
      },
      "indexes": ["server_id", "game_type", "player1_id", "player2_id"]
    },
    "user_preferences": {
      "columns": {
        "user_id": "VARCHAR(50) PRIMARY KEY",
        "stats_opt_out": "BOOLEAN DEFAULT FALSE",
        "created_at": "TIMESTAMP DEFAULT CURRENT_TIMESTAMP",
        "updated_at": "TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP"
      },
      "indexes": []
    },
    "user_currency": {
      "columns": {
        "user_id": "VARCHAR(50) PRIMARY KEY",
        "balance": "INT DEFAULT 1000",
        "last_daily": "DATE",
        "win_streak": "INT DEFAULT 0",
        "last_win": "DATE",
        "total_earned": "BIGINT DEFAULT 0",
        "daily_boost_expires": "TIMESTAMP NULL",
        "streak_shield_count": "INT DEFAULT 0",
        "created_at": "TIMESTAMP DEFAULT CURRENT_TIMESTAMP",
        "updated_at": "TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP"
      },
      "indexes": []
    },
    "coin_transactions": {
      "columns": {
        "id": "INT AUTO_INCREMENT PRIMARY KEY",
        "user_id": "VARCHAR(50) NOT NULL",
        "amount": "INT NOT NULL",
        "reason": "VARCHAR(100) NOT NULL",
        "balance_before": "INT NOT NULL",
        "balance_after": "INT NOT NULL",
        "created_at": "TIMESTAMP DEFAULT CURRENT_TIMESTAMP"
      },
      "indexes": ["user_id", "created_at"]
    },
    "shop_items": {
      "columns": {
        "item_id": "VARCHAR(50) PRIMARY KEY",
        "name": "VARCHAR(100) NOT NULL",
        "price": "INT NOT NULL",
        "category": "VARCHAR(50) NOT NULL",
        "description": "TEXT",
        "unlocked_by_default": "BOOLEAN DEFAULT FALSE",
        "created_at": "TIMESTAMP DEFAULT CURRENT_TIMESTAMP"
      },
      "indexes": ["category"]
    },
    "user_inventory": {
      "columns": {
        "user_id": "VARCHAR(50) NOT NULL",
        "item_id": "VARCHAR(50) NOT NULL",
        "quantity": "INT DEFAULT 1",
        "acquired_date": "TIMESTAMP DEFAULT CURRENT_TIMESTAMP",
        "acquired_method": "ENUM('purchase', 'gift', 'reward', 'admin') DEFAULT 'purchase'",
        "gifted_by": "VARCHAR(50) NULL",
        "PRIMARY KEY (user_id, item_id)": ""
      },
      "indexes": ["user_id", "item_id"]
    },
    "gift_transactions": {
      "columns": {
        "id": "INT AUTO_INCREMENT PRIMARY KEY",
        "sender_id": "VARCHAR(50) NOT NULL",
        "recipient_id": "VARCHAR(50) NOT NULL",
        "item_id": "VARCHAR(50) NOT NULL",
        "message": "TEXT",
        "cost": "INT NOT NULL",
        "created_at": "TIMESTAMP DEFAULT CURRENT_TIMESTAMP"
      },
      "indexes": ["sender_id", "recipient_id", "created_at"]
    },
    "gift_requests": {
      "columns": {
        "id": "INT AUTO_INCREMENT PRIMARY KEY",
        "user_id": "VARCHAR(50) NOT NULL",
        "item_id": "VARCHAR(50) NOT NULL",
        "message": "TEXT",
        "created_at": "TIMESTAMP DEFAULT CURRENT_TIMESTAMP",
        "UNIQUE KEY unique_user_item (user_id, item_id)": ""
      },
      "indexes": ["user_id"]
    }
  }
}